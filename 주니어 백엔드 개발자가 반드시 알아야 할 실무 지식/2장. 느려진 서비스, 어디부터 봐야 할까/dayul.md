# 처리량과 응답 시간
성능이 저하되면 가장 눈에 띄는 현상은 결과가 늦게 표시되는 것
-> 타임아웃(시간초과) 에러가 발생하기도 함

다양한 지표가 성능과 관련되어 있음(네트워크 속도, 메모리 크기.. 등)
그 중 서버 성능과 관련되어 있는 2가지!

## 1. 응답 시간
: 사용자의 요청을 처리하는 데 걸리는 시간

**응답시간의 구성요소**
1. API 요청
    - TCP를 이용해서 서버에 연결
    - 정해진 프로토콜에 따라 데이터를 서버에 전송
2. SQL 실행, 응답 생성 등(서버 실행)
3. API 응답(클라이언트로 데이터 전송)

**응답 시간 측정**
- TTFB(Time to First Byte) : 응답 데이터 중 첫 번째 바이트가 도착할 때까지 걸린 시간
- TTLB(Time to Last Byte) : 응답 데이터 중 마지막 바이트가 도착할 때까지 걸린 시간
  
=> 서버 성능을 올바르게 평가하려면 데이터 특성이나 네트워크 환경을 고려해 둘 중 적절한 지표를 선택하여 측정해야함

> 응답 시간을 줄여야 트래픽과 매출이 줄지 않는다. 증가하면 트래픽과 매출이 줄어든다.

**그럼 어떻게?**
1. 응답 시간을 구성하는 서버 처리 시간을 확인
     - 보통 DB 연동과 API 연동 시간이 전체 실행 시간의 70~80% 이므로 여기에 집중하기
   
## 2. 처리량
: 단위 당 시스템이 처리하는 작업량(TPS, TPS)

- TPS(Transaction per second) : 초당 트랜잭션 수
- RPS(Response per second) : 초당 요청 수

예를 들어, 서버가 한번에 5개의 요청을 처리할 수 있다고 가정하자.
이때 요청당 처리 시간이 1초라면 최대 TPS는 5가 되므로,
동시에 들어오는 요청 수가 최대 TPS를 초과하면 서버는 초과한 요청을 나중에 처리함

## 3. 그래서 응답 시간을 줄이려면?
앞서 말한대로 응답 시간의 증가는 사용자 이탈로 이어질 수 있음

- 서버가 동시에 처리할 수 있는 요청 수를 늘려 대기 시간 줄이기
- 처리 시간 자체를 줄여 대기 시간 줄이기

와 같은 방법을 고려해 TPS를 높여야 함

## 4. 성능을 개선하려면?
현재 서버의 TPS와 응답 시간을 알고(측정하고), 이 결과를 바탕으로 목표 TPS와 응답 시간을 설정해 효과적인 성능 개선안을 도출해야 함

> TPS를 확인하는 가장 간단한 방법은 모니터링 시스템을 활용하는 것이므로 스카우터, 핀포인트, 뉴렐릭 같은 도구를 사용하자.

더 정확한 TPS를 알고 싶다면 웹 서버 접근 로그를 활용!